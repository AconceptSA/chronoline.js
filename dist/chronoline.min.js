/* chronoline.js v0.1.2 22-04-2016 
 * by Kevin Leung for Zanbato, https://zanbato.com 
 * MIT SEE LICENSE IN https://github.com/StoicLoofah/chronoline.js/LICENSE.md */
function addElemClass(a,b,c){"SVG"==a?b.setAttribute("class",c):b.className+=" "+c}function strftime(a,b){return b.formatDate(a)}function getLeft(a){return parseInt(a.style.left)}function getEndDate(a){return a[a.length-1]}function isFifthDay(a){var b=a.getDate();return(1==b||b%5===0)&&30!=b}function isHalfMonth(a){var b=a.getDate();return 1==b||15==b}function prevMonth(a){var b=new Date(a.getTime()-DAY_IN_MILLISECONDS);return new Date(b.getFullYear(),b.getMonth(),1)}function nextMonth(a){return new Date(a.getFullYear(),a.getMonth()+1,1)}function prevQuarter(a){var b=new Date(a.getTime()-DAY_IN_MILLISECONDS),c=b.getMonth();return new Date(b.getFullYear(),c-c%3,1)}function nextQuarter(a){var b=a.getMonth();return new Date(a.getFullYear(),b-b%3+3,1)}function backWeek(a){return new Date(a.getTime()-7*DAY_IN_MILLISECONDS)}function forwardWeek(a){return new Date(a.getTime()+7*DAY_IN_MILLISECONDS)}function Chronoline(a,b,c){this.VERSION="0.1.1",b=null!=b?b:[],c=null!=c?c:{};var d={defaultStartDate:null,startDate:null,endDate:null,visibleSpan:2592e6,timelinePadding:0,fitVisibleSpan:!1,topMargin:40,eventHeight:5,eventMargin:4,dateLabelHeight:50,hashLength:4,minEventsHeight:40,maxEventsHeight:1e3,hashColor:"#b8b8b8",eventAttrs:{fill:"#0055e1",stroke:"#0055e1","stroke-width":2},hashInterval:null,labelInterval:null,labelFormat:"%d",subLabel:"month",subLabelMargin:2,subLabelAttrs:{"font-weight":"bold"},floatingSubLabels:!0,subSubLabel:"year",subSubLabelMargin:2,subSubLabelAttrs:{"font-weight":"bold"},floatingSubSubLabels:!0,fontAttrs:{"font-size":10,fill:"#000000"},scrollable:!0,scrollLeft:backWeek,scrollRight:forwardWeek,animated:!1,tooltips:!1,markToday:"line",todayAttrs:{stroke:"#484848"},sections:[],floatingSectionLabels:!0,sectionLabelAttrs:{},sectionLabelsOnHover:!0,draggable:!1,continuousScroll:!0,continuousScrollSpeed:1,eventClick:null,eventDblClick:null,sectionClick:null,sectionDblClick:null,backgroundClick:null,backgroundDblClick:null},e=this;for(var f in d)e[f]=d[f];for(var f in c)e[f]=c[f];e.floatingSectionLabels&=null!==e.sections,e.sectionLabelsOnHover&=null!==e.sections,e.originalStartDate=e.startDate,e.originalEndDate=e.endDate,e.originalDefaultStartDate=e.defaultStartDate,e.domElement=a,e.wrapper=document.createElement("div"),e.wrapper.className="chronoline-wrapper",e.domElement.appendChild(e.wrapper),e.sortEvents=function(a,b){a=a.dates,b=b.dates;var c=a[a.length-1].getTime(),d=b[b.length-1].getTime();return c!=d?c-d:a[0].getTime()-b[0].getTime()};for(var g=0;g<b.length;g++)for(var h=0;h<b[g].dates.length;h++)b[g].dates[h]=new Date(b[g].dates[h].getTime()),b[g].dates[h].stripTime();if(e.events=b,e.events.sort(e.sortEvents),null!==e.sections){for(var g=0;g<e.sections.length;g++)for(var h=0;h<e.sections[g].dates.length;h++)e.sections[g].dates[h]=new Date(e.sections[g].dates[h].getTime()),e.sections[g].dates[h].stripTime();e.sections.sort(e.sortEvents)}e.pxToMs=function(a){return e.startTime+a/e.pxRatio},e.msToPx=function(a){return(a-e.startTime)*e.pxRatio},e.resize=function(a){e.visibleSpan=a,e.init()},e.zoom=function(a){e.resize(e.visibleSpan/a)},e.init=function(){if(e.today=new Date(Date.now()),e.today.stripTime(),e.startDate=e.originalStartDate,e.endDate=e.originalEndDate,e.defaultStartDate=e.originalDefaultStartDate,null===e.defaultStartDate&&(e.defaultStartDate=e.today),null===e.startDate)if(e.events.length>0){e.startDate=e.events[0].dates[0];for(var a=1;a<e.events.length;a++)e.events[a].dates[0]<e.startDate&&(e.startDate=e.events[a].dates[0])}else{if(!(e.sections.length>0))return;e.startDate=e.sections[0].dates[0];for(var a=0;a<e.sections.length;a++)e.sections[a].dates[0]<e.startDate&&(e.startDate=e.sections[a].dates[0])}if(e.startDate.stripTime(),e.startDate>e.defaultStartDate&&(e.startDate=e.defaultStartDate),e.startDate=new Date(e.startDate.getTime()-e.timelinePadding),e.startTime=e.startDate.getTime(),null===e.endDate)if(e.events.length>0){e.endDate=getEndDate(e.events[0].dates);for(var a=1;a<e.events.length;a++)getEndDate(e.events[a].dates)>e.endDate&&(e.endDate=getEndDate(e.events[a].dates))}else{if(!(e.sections.length>0))return;e.endDate=e.sections[0].dates[1];for(var a=0;a<e.sections.length;a++)e.sections[a].dates[1]>e.endDate&&(e.endDate=e.sections[a].dates[1])}e.endDate<e.defaultStartDate&&(e.endDate=e.defaultStartDate),e.endDate=new Date(Math.max(e.endDate.getTime(),e.startDate.getTime()+e.visibleSpan)+e.timelinePadding),e.endDate.stripTime(),e.visibleWidth=e.domElement.clientWidth,e.fitVisibleSpan?(e.startDate=new Date(e.startDate.getTime()-DAY_IN_MILLISECONDS),e.endDate=new Date(e.endDate.getTime()+DAY_IN_MILLISECONDS),e.pxRatio=e.visibleWidth/(e.endDate-e.startDate)):e.pxRatio=e.visibleWidth/e.visibleSpan,e.totalWidth=e.pxRatio*(e.endDate.getTime()-e.startDate.getTime()),e.maxLeftPx=e.totalWidth-e.visibleWidth,e.circleRadius=e.eventHeight/2,e.eventRows=[[]],e.rowLastPxs=[0];for(var a=0;a<e.events.length;a++){for(var b=!1,c=e.msToPx(e.events[a].dates[0].getTime())-e.circleRadius,d=0;d<e.eventRows.length;d++)if(e.rowLastPxs[d]<c){e.eventRows[d].push(e.events[a]),e.rowLastPxs[d]=e.msToPx(getEndDate(e.events[a].dates).getTime())+e.circleRadius,b=!0;break}b||(e.eventRows.push([e.events[a]]),e.rowLastPxs.push(e.msToPx(getEndDate(e.events[a].dates).getTime())+e.circleRadius))}if(e.eventsHeight=Math.max(Math.min(e.eventRows.length*(e.eventMargin+e.eventHeight),e.maxEventsHeight),e.minEventsHeight),e.totalHeight=e.dateLabelHeight+e.eventsHeight+e.topMargin,e.myCanvas&&e.wrapper.hasChildNodes())for(a=e.wrapper.childNodes.length-1;a>=0;a--)if(e.wrapper.childNodes[a]===e.myCanvas){e.wrapper.removeChild(e.myCanvas);break}if(e.myCanvas=document.createElement("div"),e.myCanvas.className="chronoline-canvas",e.wrapper.appendChild(e.myCanvas),e.paper=Raphael(e.myCanvas,e.totalWidth,e.totalHeight),e.paperType=e.paper.raphael.type,e.paperElem=e.myCanvas.childNodes[0],e.floatingSet=e.paper.set(),e.sectionLabelSet=e.paper.set(),e.backgroundClick&&(e.myCanvas.onclick=function(a){if("circle"!=a.target.nodeName&&"rect"!=a.target.nodeName){var b=new Date(e.pxToMs(a.clientX));b.stripTime(),e.backgroundClick(b)}}),e.backgroundDblClick&&(e.myCanvas.ondblclick=function(a){if("circle"!=a.target.nodeName&&"rect"!=a.target.nodeName){var b=new Date(e.pxToMs(a.clientX));b.stripTime(),e.backgroundDblClick(b)}}),null!==e.sections)for(var a=0;a<e.sections.length;a++){var f=e.sections[a],g=(f.dates[0].getTime()-e.startTime)*e.pxRatio,h=(f.dates[1]-f.dates[0])*e.pxRatio,i=e.paper.rect(g,0,h,e.totalHeight);(e.sectionClick||e.sectionDblClick)&&i.data("sectionData",f),e.sectionClick&&i.click(function(a){a.preventDefault();var b=new Date(e.pxToMs(a.clientX));b.stripTime(),e.sectionClick(this.data("sectionData"),b)}),e.sectionDblClick&&i.dblclick(function(a){a.preventDefault();var b=new Date(e.pxToMs(a.clientX));b.stripTime(),e.sectionDblClick(this.data("sectionData"),b)}),addElemClass(e.paperType,i.node,"chronoline-section"),i.attr("stroke-width",0),i.attr("stroke","#ffffff"),"undefined"!=typeof f.attrs&&i.attr(f.attrs);var j=e.paper.text(g+10,10,f.title);j.attr("text-anchor","start"),j.attr(e.sectionLabelAttrs),e.floatingSectionLabels&&(j.data("left-bound",g+10),j.data("right-bound",g+h-j.attr("width")),e.floatingSet.push(j),e.sectionLabelSet.push(j)),i.data("label",j),e.sectionLabelsOnHover&&(i.hover(function(){this.data("label").animate({opacity:1},200)},function(){this.data("label").animate({opacity:0},200)}),j.hover(function(){this.animate({opacity:1},200)},function(){this.animate({opacity:0},200)}),j.attr("opacity",0))}e.sectionLabelSet.forEach(function(a){a.toFront()});for(var k=0;k<e.eventRows.length;k++)for(var l=e.totalHeight-e.dateLabelHeight-(k+1)*(e.eventMargin+e.eventHeight),m=0;m<e.eventRows[k].length;m++){var n=e.eventRows[k][m],g=(n.dates[0].getTime()-e.startTime)*e.pxRatio,i=null;if(1==n.dates.length)i=e.paper.circle(g,l+e.circleRadius,e.circleRadius).attr(e.eventAttrs);else{var h=(getEndDate(n.dates)-n.dates[0])*e.pxRatio,o=e.paper.circle(g,l+e.circleRadius,e.circleRadius).attr(e.eventAttrs);"undefined"!=typeof n.attrs&&o.attr(n.attrs),addElemClass(e.paperType,o.node,"chronoline-event");var p=e.paper.circle(g+h,l+e.circleRadius,e.circleRadius).attr(e.eventAttrs);"undefined"!=typeof n.attrs&&p.attr(n.attrs),addElemClass(e.paperType,p.node,"chronoline-event"),i=e.paper.rect(g,l,h,e.eventHeight).attr(e.eventAttrs)}if((e.eventClick||e.eventDblClick)&&i.data("eventData",n),e.eventClick&&i.click(function(a){a.preventDefault(),e.eventClick(this.data("eventData"))}),e.eventDblClick&&i.dblclick(function(a){a.preventDefault(),e.eventDblClick(this.data("eventData"))}),"undefined"!=typeof n.link&&(i.data("link",n.link),i.click(function(){window.location.href=this.data("link")})),"undefined"!=typeof n.attrs&&i.attr(n.attrs),addElemClass(e.paperType,i.node,"chronoline-event"),i.attr("title",n.title),e.tooltips){var q=n.description,r=n.title,s=jQuery(i.node);"undefined"!=typeof q&&""!==q||(q=r,r=""),"SVG"==Raphael.type&&(s=s.parent()),s.qtip({content:{title:r,text:q},position:{my:"top left",target:"mouse",viewport:jQuery(window),adjust:{x:10,y:10}},hide:{fixed:!0},style:{classes:"qtip-shadow qtip-dark qtip-rounded"}})}if(null!==e.sections&&e.sectionLabelsOnHover){var t=n.section;if("undefined"!=typeof t){for(var a=0;a<e.sections.length;a++)if(e.sections[a].section==t){i.data("sectionLabel",e.sectionLabelSet[a]);break}i.hover(function(){this.data("sectionLabel").animate({opacity:1},200)},function(){this.data("sectionLabel").animate({opacity:0},200)})}}}e.dateLineY=e.totalHeight-e.dateLabelHeight;var u=e.paper.path("M0,"+e.dateLineY+"L"+e.totalWidth+","+e.dateLineY);if(u.attr("stroke",e.hashColor),e.bottomHashY=e.dateLineY+e.hashLength,e.labelY=e.bottomHashY+e.fontAttrs["font-size"],e.subLabelY=e.bottomHashY+2*e.fontAttrs["font-size"]+e.subLabelMargin,e.subSubLabelY=e.subLabelY+e.fontAttrs["font-size"]+e.subSubLabelMargin,"year"==e.subSubLabel)for(var v=e.endDate.getFullYear(),w=e.startDate.getFullYear();v>=w;w++){var x=new Date(w,0,1);x.stripTime();var y=e.msToPx(x.getTime()),z=e.paper.text(y,e.subSubLabelY,x.formatDate("%Y").toUpperCase());if(z.attr(e.fontAttrs),z.attr(e.subSubLabelAttrs),e.floatingSubSubLabels){z.data("left-bound",y);var A=new Date(w,11,31);A.stripTime(),z.data("right-bound",Math.min((A.getTime()-e.startTime)*e.pxRatio-5,e.totalWidth)),e.floatingSet.push(z)}}e.scrollable&&e.initScrollable(),e.draggable&&e.initDraggable(),e.drawnStartMs=null,e.drawnEndMs=null,e.paperElem.style.left=-(e.defaultStartDate-e.startDate)*e.pxRatio+20+"px",e.goToPx(getLeft(e.paperElem)),e.myCanvas.style.height=e.totalHeight+"px"},e.drawLabelsHelper=function(a,b){for(var c=a;b>c;c+=DAY_IN_MILLISECONDS){var d=new Date(c),f=d.getDate(),g=e.msToPx(c);if(null===e.hashInterval||e.hashInterval(d)){var h=e.paper.path("M"+g+","+e.dateLineY+"L"+g+","+e.bottomHashY);h.attr("stroke",e.hashColor)}if(null===e.labelInterval||e.labelInterval(d)){var i=e.paper.text(g,e.labelY,d.formatDate(e.labelFormat));i.attr(e.fontAttrs)}if(e.markToday&&c==e.today.getTime())if("labelBox"==e.markToday){i.attr({text:i.attr("text")+"\n"+d.formatDate("%b").toUpperCase(),"font-size":e.fontAttrs["font-size"]+2,y:e.bottomHashY+e.fontAttrs["font-size"]+5});var j=i.getBBox(),k=e.paper.rect(j.x-2,j.y-2,j.width+4,j.height+4);k.attr("fill","90-#f4f4f4-#e8e8e8"),k.insertBefore(i)}else if("line"==e.markToday){var l=e.paper.path("M"+g+",0L"+g+","+e.dateLineY);l.attr(e.todayAttrs)}if(1==f&&"month"==e.subLabel){var m=e.paper.text(g,e.subLabelY,d.formatDate("%b").toUpperCase());if(m.attr(e.fontAttrs),m.attr(e.subLabelAttrs),e.floatingSubLabels){m.data("left-bound",g);var n=new Date(d.getFullYear(),d.getMonth()+1,0,CL_HOUR);m.data("right-bound",Math.min((n.getTime()-e.startTime)*e.pxRatio-5,e.totalWidth)),e.floatingSet.push(m)}}}},e.drawnStartMs=null,e.drawnEndMs=null,e.drawLabels=function(a){var b=Math.max(0,a-e.visibleWidth),c=(Math.min(e.totalWidth,a+2*e.visibleWidth),new Date(e.pxToMs(b)));c=new Date(c.getFullYear(),c.getMonth(),1,CL_HOUR);var d=c.getTime(),f=new Date(e.pxToMs(Math.min(e.totalWidth,a+2*e.visibleWidth)));f.stripTime();var g=f.getTime();null===e.drawnStartMs?(e.drawnStartMs=d,e.drawnEndMs=g,e.drawLabelsHelper(d,g)):d>e.drawnEndMs?(e.drawLabelsHelper(e.drawnEndMs,g),e.drawnEndMs=g):g<e.drawnStartMs?(e.drawLabelsHelper(d,e.drawnStartMs),e.drawnStartMs=d):(d<e.drawnStartMs&&(e.drawLabelsHelper(d,e.drawnStartMs),e.drawnStartMs=d),g>e.drawnEndMs&&(e.drawLabelsHelper(e.drawnEndMs,g),e.drawnEndMs=g))},e.isMoving=!1,e.goToPx=function(a,b,c){function d(b){null===i&&(i=b);var c=(b-i)/200,h=(a-f)*c+f;j.style.left=h+"px";for(var k=0;k<g.length;k++)g[k][0].attr("x",g[k][2]*c+g[k][1]);if(1>c)requestAnimationFrame(d);else{e.paperElem.style.left=a+"px";for(var k=0;k<g.length;k++)g[k][0].attr("x",g[k][2]+g[k][1]);e.isMoving=!1}}if(e.isMoving)return!1;b="undefined"!=typeof b?b:e.animated,c="undefined"!=typeof c?c:!0,a=Math.max(Math.min(a,0),-e.maxLeftPx),c&&e.drawLabels(-a);var f=getLeft(e.paperElem);e.scrollable&&(0===a?(e.leftControl.style.display="none",e.isScrolling=!1):e.leftControl.style.display="",a==e.visibleWidth-e.totalWidth?(e.rightControl.style.display="none",e.isScrolling=!1):e.rightControl.style.display="");var g=[],h=-a+5;if(e.floatingSet.forEach(function(a){a.data("left-bound")<h&&a.data("right-bound")>h?g.push([a,a.attr("x"),h-a.attr("x")+10]):a.attr("x")!=a.data("left-bound")&&g.push([a,a.attr("x"),a.data("left-bound")-a.attr("x")])}),b){e.isMoving=!0;var i=null,j=e.paperElem;requestAnimationFrame(d)}else{e.paperElem.style.left=a+"px";for(var k=0;k<g.length;k++)g[k][0].attr("x",g[k][2]+g[k][1])}return 0!==a&&a!=-e.maxLeftPx},e.goToDate=function(a,b){a=new Date(a.getTime()),a.stripTime(),0>b?e.goToPx(-e.msToPx(a.getTime())):b>0?e.goToPx(-e.msToPx(a.getTime())+e.visibleWidth):e.goToPx(-e.msToPx(a.getTime())+e.visibleWidth/2)},e.initScrollable=function(){if(e.leftControl&&e.wrapper.hasChildNodes())for(g=e.wrapper.childNodes.length-1;g>=0;g--)if(e.wrapper.childNodes[g]===e.leftControl){e.wrapper.removeChild(e.leftControl);break}e.leftControl=document.createElement("div"),e.leftControl.className="chronoline-left",e.leftControl.style.marginTop=e.topMargin+"px";var a=document.createElement("div");a.className="chronoline-left-icon",e.leftControl.appendChild(a),e.wrapper.appendChild(e.leftControl);var b=Math.max(e.eventsHeight,e.leftControl.clientHeight);if(e.leftControl.style.height=b+"px",a.style.marginTop=(b-15)/2+"px",e.rightControl&&e.wrapper.hasChildNodes())for(g=e.wrapper.childNodes.length-1;g>=0;g--)if(e.wrapper.childNodes[g]===e.rightControl){e.wrapper.removeChild(e.rightControl);break}e.rightControl=document.createElement("div"),e.rightControl.className="chronoline-right",e.rightControl.style.marginTop=e.topMargin+"px";var c=document.createElement("div");c.className="chronoline-right-icon",e.rightControl.appendChild(c),e.wrapper.appendChild(e.rightControl),e.rightControl.style.height=e.leftControl.style.height,c.style.marginTop=a.style.marginTop,e.scrollLeftDiscrete=function(a){return e.goToDate(e.scrollLeft(new Date(e.pxToMs(-getLeft(e.paperElem)))),-1),!1},e.scrollRightDiscrete=function(a){return e.goToDate(e.scrollRight(new Date(e.pxToMs(-getLeft(e.paperElem)))),-1),!1},e.continuousScroll?(e.isScrolling=!1,e.timeoutId=-1,e.scrollLeftContinuous=function(a){null===e.scrollStart&&(e.scrollStart=a),e.isScrolling&&requestAnimationFrame(e.scrollLeftContinuous);var b=e.continuousScrollSpeed*(a-e.scrollStart)+e.scrollPaperStart;e.goToPx(b,!1,b>-e.msToPx(e.drawnStartMs))},e.endScrollLeft=function(a){clearTimeout(e.scrollTimeoutId),e.toScrollDiscrete&&(e.toScrollDiscrete=!1,e.scrollLeftDiscrete()),e.isScrolling=!1},e.leftControl.onmousedown=function(a){e.toScrollDiscrete=!0,e.scrollPaperStart=getLeft(e.paperElem),e.scrollTimeoutId=setTimeout(function(){e.toScrollDiscrete=!1,e.scrollStart=null,e.isScrolling=!0,requestAnimationFrame(e.scrollLeftContinuous)},200)},e.leftControl.onmouseup=e.endScrollLeft,e.leftControl.onmouseleave=e.endScrollLeft,e.scrollRightContinuous=function(a){null===e.scrollStart&&(e.scrollStart=a),e.isScrolling&&requestAnimationFrame(e.scrollRightContinuous);var b=e.continuousScrollSpeed*(e.scrollStart-a)+e.scrollPaperStart;e.goToPx(b,!1,b-e.visibleWidth<-e.msToPx(e.drawnEndMs))},e.endScrollRight=function(a){clearTimeout(e.scrollTimeoutId),e.toScrollDiscrete&&(e.toScrollDiscrete=!1,e.scrollRightDiscrete()),e.isScrolling=!1},e.rightControl.onmousedown=function(a){e.toScrollDiscrete=!0,e.scrollPaperStart=getLeft(e.paperElem),e.scrollTimeoutId=setTimeout(function(){e.toScrollDiscrete=!1,e.scrollStart=null,e.isScrolling=!0,requestAnimationFrame(e.scrollRightContinuous)},500)},e.rightControl.onmouseup=e.endScrollRight,e.rightControl.onmouseleave=e.endScrollRight):(e.leftControl.onclick=e.scrollLeftDiscrete,e.rightControl.onclick=e.scrollLeftDiscrete)},e.initDraggable=function(){e.stopDragging=function(a){jQuery(e.wrapper).removeClass("dragging").unbind("mousemove",e.mouseMoved).unbind("mouseleave",e.stopDragging).unbind("mouseup",e.stopDragging),e.drawLabels(-getLeft(e.paperElem))},e.mouseMoved=function(a){e.goToPx(e.dragPaperStart-(e.dragMouseStart-a.pageX),!1,!1)},e.wrapper.className+=" chronoline-draggable",jQuery(e.paperElem).mousedown(function(a){a.preventDefault(),e.dragMouseStart=a.pageX,e.dragPaperStart=getLeft(e.paperElem),jQuery(e.wrapper).addClass("dragging").bind("mousemove",e.mouseMoved).bind("mouseleave",e.stopDragging).bind("mouseup",e.stopDragging)})},e.goToToday=function(){e.goToDate(e.today,0)},e.getLeftTime=function(){return Math.floor(e.startTime-getLeft(e.paperElem)/e.pxRatio)},e.getRightTime=function(){return Math.floor(e.startTime-(getLeft(e.paperElem)-e.visibleWidth)/e.pxRatio)},e.init()}Date.now||(Date.now=function(){return+new Date}),DAY_IN_MILLISECONDS=864e5,requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){return window.setTimeout(function(){a(+new Date)},1e3/60)},Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1),b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())},Date.prototype.dstHourAdjustment=function(){return(this.stdTimezoneOffset()-this.getTimezoneOffset())/60},CL_HOUR=12,Date.prototype.stripTime=function(){this.setHours(CL_HOUR+this.dstHourAdjustment()),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0)},Date.MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.prototype.formatDate=function(a){var b=a;if(-1!=a.indexOf("%d")){var c=this.getDate().toString();c.length<2&&(c="0"+c),b=b.replace("%d",c)}if(-1!=a.indexOf("%b")){var d=Date.MONTH_NAMES[this.getMonth()].substring(0,3);b=b.replace("%b",d)}if(-1!=a.indexOf("%Y")&&(b=b.replace("%Y",this.getFullYear())),-1!=a.indexOf("%a")){var e=Date.DAY_NAMES[this.getDay()].substring(0,3);b=b.replace("%a",e)}return b};